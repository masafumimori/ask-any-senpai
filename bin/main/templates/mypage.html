<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/css/reset.min.css" />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.14.0/css/all.css"
    />
    <link rel="stylesheet" href="/css/page-header.min.css" />
    <link rel="stylesheet" href="/css/mypage.min.css" />
    <title>Ask Any-Senpai</title>
  </head>
  <body>
    <!-- Header -->
    <header th:insert="fragments/page_header::pageHeader"></header>

    <!-- My-page content-->
    <section class="mypage">
      <div class="mypage-box">
       <h2>プロフィール</h2>
       <div class="mypage-img" th:if="${user.twitter != null}">
         <img
           th:src="@{'https://unavatar.now.sh/twitter/' + ${user.twitter}}"
           alt="Twitterプロフィール画像"
         />
       </div>
       <div class="mypage-img" th:if="${user.twitter == null}">
         <img class="default-pic" src="/img/default-boy.png" alt="デフォルト画像" />
       </div>
       <div class="mypage-items">
         <p>ユーザー名：<span th:text="${user.userName}"/></span></p>
       </div>
       <div class="mypage-items">
         <p>パスワード：<span th:text="${user.password}"/></span></p>
       </div>
       <div class="mypage-items">
         <p>メールアドレス：<span th:text="${user.email}"/></span></p>
       </div>
       <div class="mypage-items" >
         <p>留学した地域：
           <span th:if="${user.area != null}" id="showArea"/></span>
           <span th:if="${user.area == null}" th:text="未登録"/></span>
         </p>
       </div>
       <div class="mypage-items">
         <p>留学した国：
           <span th:if="${user.nation != null}" id="showNation"></span>
           <span th:if="${user.nation == null}" th:text="未登録"/></span>
       </p>
       </div>
       <div class="mypage-items">
         <p>登録しているSNS：
         <span th:if="${user.twitter == null || user.twitter == ''}" /></span>
         <span th:if="${user.twitter != null && user.twitter != ''}">
           <a
           th:href="@{'https://twitter.com/' + ${user.twitter}}"
           class="twitter"
           target="_blank"
           ><i class="fab fa-twitter"></i
           ></a>
         </span>
         <span th:if="${user.instagram == null || user.instagram == ''}" /></span>
         <span th:if="${user.instagram != null && user.instagram != ''}">
           <a
           th:href="@{'https://instagram.com/' + ${user.instagram}}"
           class="instagram"
           target="_blank"
           ><i class="fab fa-instagram"></i
           ></a>
         </span>
         <span th:if="${user.facebook == null || user.facebook == ''}" /></span>
         <span th:if="${user.facebook != null && user.facebook != ''}">
           <a
           th:href="@{'https://facebook.com/' + ${user.facebook}}"
           class="facebook"
           target="_blank"
           ><i class="fab fa-facebook"></i
           ></a>
         </span>
         </p>
       </div>
       <div class="edit-box">
         <a href="/studyabroad/user/mypage_edit" class="edit-btn">プロフィール編集</a>
       </div>
      </div>
    </section>
    
    <!-- jQuery CDN -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script th:inline="javascript">
      /*<![CDATA[*/

      $(() => {

        // Show area if it's set in DB
        Object.keys(areas).forEach((area) => {
          if(area == /*[[${user.area}]]*/){
            $('#showArea').text(areas[area]);
          }
        });

        // Set default NATION according to data in DB
        Object.keys(nations).forEach((nation) => {
          if(nation == /*[[${user.nation}]]*/){
            $('#showNation').val(nation).text(nations[nation]);
          }
        });

      });

      const areas = {
        asia: "アジア",
        europe: "ヨーロッパ",
        america: "アメリカ",
        africa: "アフリカ",
        others: "その他"
      };

      const nations = {
        america: "アメリカ",
        canada: "カナダ",
        england: "イギリス",
        australia: "オーストラリア",
        newzealand: "ニュージーランド",
        italy: "イタリア",
        spain: "スペイン",
        germany: "ドイツ",
        france: "フランス",
        portugal: "ポルトガル",
        china: "中国",
        korea: "韓国",
        philippines: "フィリピン",
        thailand: "タイ",
        vietnam: "ベトナム",
        others: "その他"
      };

      /*]]>*/
    </script>

    
  </body>
</html>
