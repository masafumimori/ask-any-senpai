<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ask Any-Senpai</title>
  </head>
  <body>
    <th:block th:fragment="pageHeader">
      <!-- jQuery CDN -->
      <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
      <script
        src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"
      ></script>
      <script>
        $(() => {
          $(".login-btn").on("click", () => {
            location.replace("/studyabroad/user/login_page");
          });

          $(".signup-btn").on("click", () => {
            location.replace("/studyabroad/user//signup_page");
          });

          $("#mypage-btn").on("click", () => {
            location.replace("/studyabroad/user/mypage");
          });

          $("#logout-btn").on("click", () => {
            $.ajax({
              type: "POST",
              url: "/studyabroad/user/logout",
              datatype: "json",
            }).then(
              (result) => {
                alert("Logged out!");
                location.replace("/studyabroad/");
              },
              () => {
                alert("Logout failed.");
              }
            );
          });
        });
      </script>

      <div class="logo">
        <a href="/studyabroad/">
          <img src="/img/profile(plain_circle).png" alt="site logo" />
        </a>
      </div>
      <nav>
        <div class="switch-div" th:if="${user} == null">
          <button class="signup-btn">新規登録</button>
          <button class="login-btn">ログイン</button>
        </div>

        <div class="switch-div" th:if="${user} != null">
          <button id="mypage-btn">マイページ</button>
          <button id="logout-btn">ログアウト</button>
        </div>
      </nav>
    </th:block>
  </body>
</html>
